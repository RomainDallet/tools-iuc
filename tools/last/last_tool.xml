<tool id="last_tool" name="LAST" version="@LAST_CONDA_VERSION@+galaxy0" python_template_version="3.5">
    <description>finds similar regions between sequences.</description>
    <macros>
        <import>last_macros.xml</import>
    </macros>
    <requirements>
        <requirement type="package" version="@LAST_CONDA_VERSION@">last</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        lastdb
        $args_db
        ref_files
        '$ref_fasta'
        &&
        lastal
        $args_al
        ref_files
        '$int_fasta'
        $last_split
        > '$result'
    ]]></command>
    <inputs>
        <param name="ref_fasta" type="data" format="fa" label="Reference sequence fasta file" />
        <param name="int_fasta" type="data" format="fa" label="Sequence of interest fasta file" />
        <param name="protein" type="boolean" truevalue="-p" falsevalue="" checked="false" label="The sequences are proteins"/>
        <param name="args_db" type="select" multiple="false" label="Lastdb arguments" >
            <option value="-cR01" selected="true"> [-cR01] Suppresses alignments caused by simple sequence </option>
            <option value="-uNEAR -R01"> [-uNEAR -R01] Find short-and-strong similarities </option>
        </param>
        <param name="args_al" type="select" multiple="false" label="Lastal arguments" >
            <option value="" selected="true"> None </option>
            <option value="-F15"> [-F15] specify translated alignment with a score penalty of 15 for frameshifts </option>
            <option value="-pPAM30"> [-pPAM30] scoring scheme finds strong protein similarities </option>
            <option value="-D100"> [-D100] makes lastal report alignments that could occur by chance once per hundred query letters. </option>
            <option value="-Q1"> [-Q1] indicates fastq-sanger format </option>
            <option value="-j4"> [-j4] estimate the ambiguity of each column in an alignment </option>
        </param>
        <param name="last_split" type="boolean" truevalue="| last-split" falsevalue="" checked="false" label="Looks for a unique best alignment for each part of each query." help="It allows different parts of one query to match different parts of the genome, which may happen due to rearrangements."/>
    </inputs>
    <outputs>
        <data name="result" format="maf" label="${os.path.splitext(os.path.basename($ref_fasta.name))[0]}-${os.path.splitext(os.path.basename($int_fasta.name))[0]}.maf" />
    </outputs>
    <help><![CDATA[
        LAST can:

            - Handle big sequence data, e.g:
                - Compare two vertebrate genomes.
                - Align billions of DNA reads to a genome.
            - Indicate the reliability of each aligned column.
            - Use sequence quality data properly.
            - Compare DNA to proteins, with frameshifts.
            - Compare PSSMs to sequences.
            - Calculate the likelihood of chance similarities between random sequences.
            - Do split and spliced alignment.
            - Train alignment parameters for unusual kinds of sequence (e.g. nanopore).

    ]]></help>
    <citations></citations>
</tool>